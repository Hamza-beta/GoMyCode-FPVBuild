{"ast":null,"code":"import axios from \"axios\";\nimport { CURRENT_POST, DELETEDPOST, LIST_POST, ONEPOST, POST_ERROR } from \"../types/post_types\";\nexport const createpost = ({\n  buildname,\n  description,\n  photos,\n  partslist,\n  backgroundimage\n}, history) => async dispatch => {\n  const config = {\n    headers: {\n      Authorization: localStorage.getItem(\"token\")\n    }\n  };\n  const formdata = new FormData();\n  formdata.append(\"buildname\", buildname);\n  formdata.append(\"backgroundimage\", backgroundimage);\n  formdata.append(\"description\", description);\n\n  for (var key of Object.keys(photos)) {\n    formdata.append(\"photos\", photos[key]);\n  }\n\n  formdata.append(\"photos\", photos);\n  formdata.append(\"partslist\", partslist);\n\n  try {\n    const res = await axios.post(\"/api/posts/CreatePost\", formdata, config); //dispatch({ type: CREATE_POST, payload: res.data });\n\n    dispatch(listpost());\n    await history.push(\"/profile\"); //console.log(res);\n  } catch (error) {\n    dispatch({\n      type: POST_ERROR,\n      payload: error.response.data\n    });\n  }\n};\nexport const editpost = (id, {\n  buildname,\n  description,\n  photos,\n  partslist,\n  backgroundimage\n}) => async dispatch => {\n  const config = {\n    headers: {\n      Authorization: localStorage.getItem(\"token\")\n    }\n  };\n  const formdata = new FormData();\n  formdata.append(\"buildname\", buildname);\n  formdata.append(\"backgroundimage\", backgroundimage);\n  formdata.append(\"description\", description);\n\n  for (var key of Object.keys(photos)) {\n    formdata.append(\"photos\", photos[key]);\n  }\n\n  formdata.append(\"photos\", photos);\n  formdata.append(\"partslist\", partslist);\n\n  try {\n    const res = await axios.post(`/api/posts/EditPost/${id}`, formdata, config);\n    dispatch(listpost());\n    await history.push(\"/profile\"); //console.log(res);\n  } catch (error) {\n    dispatch({\n      type: POST_ERROR,\n      payload: error.response.data\n    });\n  }\n};\nexport const listpost = () => async dispatch => {\n  try {\n    const res = await axios.get(\"/api/posts/ListPost\");\n    dispatch({\n      type: LIST_POST,\n      payload: res.data.Posts\n    }); //console.log(res.data.Posts);\n  } catch (error) {\n    console.log(error);\n  }\n};\nexport const currentPost = () => async dispatch => {\n  const config = {\n    headers: {\n      Authorization: localStorage.getItem(\"token\")\n    }\n  };\n\n  try {\n    const res = await axios.get(\"/api/posts/ListUserPost\", config);\n    dispatch({\n      type: CURRENT_POST,\n      payload: res.data.ListUserPost\n    });\n    console.log(res.data.ListUserPost);\n  } catch (error) {\n    console.log(error);\n  }\n};\nexport const onePost = (id, history) => async dispatch => {\n  const config = {\n    headers: {\n      Authorization: localStorage.getItem(\"token\")\n    }\n  };\n\n  try {\n    const res = await axios.get(`/api/posts/OnePost/${id}`, config);\n    dispatch({\n      type: ONEPOST,\n      payload: res.data\n    });\n    history.push(\"/buildPost\");\n  } catch (error) {\n    console.log(error);\n  }\n};\nexport const deletedPost = id => async dispatch => {\n  const config = {\n    headers: {\n      Authorization: localStorage.getItem(\"token\")\n    }\n  };\n\n  try {\n    const res = await axios.delete(`/api/posts/DeletedPost/${id}`, config);\n    dispatch(listpost());\n  } catch (error) {\n    console.log(error);\n  }\n};\nexport const deleteBuild = (id, history) => async dispatch => {\n  const config = {\n    headers: {\n      Authorization: localStorage.getItem(\"token\")\n    }\n  };\n\n  try {\n    const res = await axios.delete(`/api/posts/DeletedPost/${id}`, config);\n    await history.push(\"/\");\n    dispatch(currentPost());\n  } catch (error) {\n    console.log(error);\n  }\n};","map":{"version":3,"sources":["C:/Users/HAMZA/Desktop/GOMYCODE/authBackendFront/client/src/redux/actions/post_action.jsx"],"names":["axios","CURRENT_POST","DELETEDPOST","LIST_POST","ONEPOST","POST_ERROR","createpost","buildname","description","photos","partslist","backgroundimage","history","dispatch","config","headers","Authorization","localStorage","getItem","formdata","FormData","append","key","Object","keys","res","post","listpost","push","error","type","payload","response","data","editpost","id","get","Posts","console","log","currentPost","ListUserPost","onePost","deletedPost","delete","deleteBuild"],"mappings":"AAAA,OAAOA,KAAP,MAAkB,OAAlB;AACA,SAASC,YAAT,EAAuBC,WAAvB,EAAoCC,SAApC,EAA+CC,OAA/C,EAAwDC,UAAxD,QAA0E,qBAA1E;AAEA,OAAO,MAAMC,UAAU,GACrB,CAAC;AAAEC,EAAAA,SAAF;AAAaC,EAAAA,WAAb;AAA0BC,EAAAA,MAA1B;AAAkCC,EAAAA,SAAlC;AAA6CC,EAAAA;AAA7C,CAAD,EAAiEC,OAAjE,KACA,MAAOC,QAAP,IAAoB;AAClB,QAAMC,MAAM,GAAG;AACbC,IAAAA,OAAO,EAAE;AACPC,MAAAA,aAAa,EAAEC,YAAY,CAACC,OAAb,CAAqB,OAArB;AADR;AADI,GAAf;AAKA,QAAMC,QAAQ,GAAG,IAAIC,QAAJ,EAAjB;AACAD,EAAAA,QAAQ,CAACE,MAAT,CAAgB,WAAhB,EAA6Bd,SAA7B;AACAY,EAAAA,QAAQ,CAACE,MAAT,CAAgB,iBAAhB,EAAmCV,eAAnC;AACAQ,EAAAA,QAAQ,CAACE,MAAT,CAAgB,aAAhB,EAA+Bb,WAA/B;;AACA,OAAK,IAAIc,GAAT,IAAgBC,MAAM,CAACC,IAAP,CAAYf,MAAZ,CAAhB,EAAqC;AACnCU,IAAAA,QAAQ,CAACE,MAAT,CAAgB,QAAhB,EAA0BZ,MAAM,CAACa,GAAD,CAAhC;AACD;;AACDH,EAAAA,QAAQ,CAACE,MAAT,CAAgB,QAAhB,EAA0BZ,MAA1B;AAEAU,EAAAA,QAAQ,CAACE,MAAT,CAAgB,WAAhB,EAA6BX,SAA7B;;AACA,MAAI;AACF,UAAMe,GAAG,GAAG,MAAMzB,KAAK,CAAC0B,IAAN,CAAW,uBAAX,EAAoCP,QAApC,EAA8CL,MAA9C,CAAlB,CADE,CAEF;;AACAD,IAAAA,QAAQ,CAACc,QAAQ,EAAT,CAAR;AACA,UAAMf,OAAO,CAACgB,IAAR,CAAa,UAAb,CAAN,CAJE,CAMF;AACD,GAPD,CAOE,OAAOC,KAAP,EAAc;AACdhB,IAAAA,QAAQ,CAAC;AAAEiB,MAAAA,IAAI,EAAEzB,UAAR;AAAoB0B,MAAAA,OAAO,EAAEF,KAAK,CAACG,QAAN,CAAeC;AAA5C,KAAD,CAAR;AACD;AACF,CA5BI;AA8BP,OAAO,MAAMC,QAAQ,GACnB,CAACC,EAAD,EAAK;AAAE5B,EAAAA,SAAF;AAAaC,EAAAA,WAAb;AAA0BC,EAAAA,MAA1B;AAAkCC,EAAAA,SAAlC;AAA6CC,EAAAA;AAA7C,CAAL,KACA,MAAOE,QAAP,IAAoB;AAClB,QAAMC,MAAM,GAAG;AACbC,IAAAA,OAAO,EAAE;AACPC,MAAAA,aAAa,EAAEC,YAAY,CAACC,OAAb,CAAqB,OAArB;AADR;AADI,GAAf;AAKA,QAAMC,QAAQ,GAAG,IAAIC,QAAJ,EAAjB;AACAD,EAAAA,QAAQ,CAACE,MAAT,CAAgB,WAAhB,EAA6Bd,SAA7B;AACAY,EAAAA,QAAQ,CAACE,MAAT,CAAgB,iBAAhB,EAAmCV,eAAnC;AACAQ,EAAAA,QAAQ,CAACE,MAAT,CAAgB,aAAhB,EAA+Bb,WAA/B;;AACA,OAAK,IAAIc,GAAT,IAAgBC,MAAM,CAACC,IAAP,CAAYf,MAAZ,CAAhB,EAAqC;AACnCU,IAAAA,QAAQ,CAACE,MAAT,CAAgB,QAAhB,EAA0BZ,MAAM,CAACa,GAAD,CAAhC;AACD;;AACDH,EAAAA,QAAQ,CAACE,MAAT,CAAgB,QAAhB,EAA0BZ,MAA1B;AAEAU,EAAAA,QAAQ,CAACE,MAAT,CAAgB,WAAhB,EAA6BX,SAA7B;;AACA,MAAI;AACF,UAAMe,GAAG,GAAG,MAAMzB,KAAK,CAAC0B,IAAN,CAAY,uBAAsBS,EAAG,EAArC,EAAwChB,QAAxC,EAAkDL,MAAlD,CAAlB;AACAD,IAAAA,QAAQ,CAACc,QAAQ,EAAT,CAAR;AACA,UAAMf,OAAO,CAACgB,IAAR,CAAa,UAAb,CAAN,CAHE,CAKF;AACD,GAND,CAME,OAAOC,KAAP,EAAc;AACdhB,IAAAA,QAAQ,CAAC;AAAEiB,MAAAA,IAAI,EAAEzB,UAAR;AAAoB0B,MAAAA,OAAO,EAAEF,KAAK,CAACG,QAAN,CAAeC;AAA5C,KAAD,CAAR;AACD;AACF,CA3BI;AA6BP,OAAO,MAAMN,QAAQ,GAAG,MAAM,MAAOd,QAAP,IAAoB;AAChD,MAAI;AACF,UAAMY,GAAG,GAAG,MAAMzB,KAAK,CAACoC,GAAN,CAAU,qBAAV,CAAlB;AACAvB,IAAAA,QAAQ,CAAC;AAAEiB,MAAAA,IAAI,EAAE3B,SAAR;AAAmB4B,MAAAA,OAAO,EAAEN,GAAG,CAACQ,IAAJ,CAASI;AAArC,KAAD,CAAR,CAFE,CAGF;AACD,GAJD,CAIE,OAAOR,KAAP,EAAc;AACdS,IAAAA,OAAO,CAACC,GAAR,CAAYV,KAAZ;AACD;AACF,CARM;AASP,OAAO,MAAMW,WAAW,GAAG,MAAM,MAAO3B,QAAP,IAAoB;AACnD,QAAMC,MAAM,GAAG;AACbC,IAAAA,OAAO,EAAE;AACPC,MAAAA,aAAa,EAAEC,YAAY,CAACC,OAAb,CAAqB,OAArB;AADR;AADI,GAAf;;AAKA,MAAI;AACF,UAAMO,GAAG,GAAG,MAAMzB,KAAK,CAACoC,GAAN,CAAU,yBAAV,EAAqCtB,MAArC,CAAlB;AACAD,IAAAA,QAAQ,CAAC;AAAEiB,MAAAA,IAAI,EAAE7B,YAAR;AAAsB8B,MAAAA,OAAO,EAAEN,GAAG,CAACQ,IAAJ,CAASQ;AAAxC,KAAD,CAAR;AACAH,IAAAA,OAAO,CAACC,GAAR,CAAYd,GAAG,CAACQ,IAAJ,CAASQ,YAArB;AACD,GAJD,CAIE,OAAOZ,KAAP,EAAc;AACdS,IAAAA,OAAO,CAACC,GAAR,CAAYV,KAAZ;AACD;AACF,CAbM;AAcP,OAAO,MAAMa,OAAO,GAAG,CAACP,EAAD,EAAKvB,OAAL,KAAiB,MAAOC,QAAP,IAAoB;AAC1D,QAAMC,MAAM,GAAG;AACbC,IAAAA,OAAO,EAAE;AACPC,MAAAA,aAAa,EAAEC,YAAY,CAACC,OAAb,CAAqB,OAArB;AADR;AADI,GAAf;;AAKA,MAAI;AACF,UAAMO,GAAG,GAAG,MAAMzB,KAAK,CAACoC,GAAN,CAAW,sBAAqBD,EAAG,EAAnC,EAAsCrB,MAAtC,CAAlB;AAEAD,IAAAA,QAAQ,CAAC;AAAEiB,MAAAA,IAAI,EAAE1B,OAAR;AAAiB2B,MAAAA,OAAO,EAAEN,GAAG,CAACQ;AAA9B,KAAD,CAAR;AACArB,IAAAA,OAAO,CAACgB,IAAR,CAAa,YAAb;AACD,GALD,CAKE,OAAOC,KAAP,EAAc;AACdS,IAAAA,OAAO,CAACC,GAAR,CAAYV,KAAZ;AACD;AACF,CAdM;AAeP,OAAO,MAAMc,WAAW,GAAIR,EAAD,IAAQ,MAAOtB,QAAP,IAAoB;AACrD,QAAMC,MAAM,GAAG;AACbC,IAAAA,OAAO,EAAE;AACPC,MAAAA,aAAa,EAAEC,YAAY,CAACC,OAAb,CAAqB,OAArB;AADR;AADI,GAAf;;AAKA,MAAI;AACF,UAAMO,GAAG,GAAG,MAAMzB,KAAK,CAAC4C,MAAN,CAAc,0BAAyBT,EAAG,EAA1C,EAA6CrB,MAA7C,CAAlB;AACAD,IAAAA,QAAQ,CAACc,QAAQ,EAAT,CAAR;AACD,GAHD,CAGE,OAAOE,KAAP,EAAc;AACdS,IAAAA,OAAO,CAACC,GAAR,CAAYV,KAAZ;AACD;AACF,CAZM;AAcP,OAAO,MAAMgB,WAAW,GAAG,CAACV,EAAD,EAAKvB,OAAL,KAAiB,MAAOC,QAAP,IAAoB;AAC9D,QAAMC,MAAM,GAAG;AACbC,IAAAA,OAAO,EAAE;AACPC,MAAAA,aAAa,EAAEC,YAAY,CAACC,OAAb,CAAqB,OAArB;AADR;AADI,GAAf;;AAKA,MAAI;AACF,UAAMO,GAAG,GAAG,MAAMzB,KAAK,CAAC4C,MAAN,CAAc,0BAAyBT,EAAG,EAA1C,EAA6CrB,MAA7C,CAAlB;AACA,UAAMF,OAAO,CAACgB,IAAR,CAAa,GAAb,CAAN;AACAf,IAAAA,QAAQ,CAAC2B,WAAW,EAAZ,CAAR;AACD,GAJD,CAIE,OAAOX,KAAP,EAAc;AACdS,IAAAA,OAAO,CAACC,GAAR,CAAYV,KAAZ;AACD;AACF,CAbM","sourcesContent":["import axios from \"axios\";\r\nimport { CURRENT_POST, DELETEDPOST, LIST_POST, ONEPOST, POST_ERROR } from \"../types/post_types\";\r\n\r\nexport const createpost =\r\n  ({ buildname, description, photos, partslist, backgroundimage }, history) =>\r\n  async (dispatch) => {\r\n    const config = {\r\n      headers: {\r\n        Authorization: localStorage.getItem(\"token\"),\r\n      },\r\n    };\r\n    const formdata = new FormData();\r\n    formdata.append(\"buildname\", buildname);\r\n    formdata.append(\"backgroundimage\", backgroundimage);\r\n    formdata.append(\"description\", description);\r\n    for (var key of Object.keys(photos)) {\r\n      formdata.append(\"photos\", photos[key]);\r\n    }\r\n    formdata.append(\"photos\", photos);\r\n\r\n    formdata.append(\"partslist\", partslist);\r\n    try {\r\n      const res = await axios.post(\"/api/posts/CreatePost\", formdata, config);\r\n      //dispatch({ type: CREATE_POST, payload: res.data });\r\n      dispatch(listpost());\r\n      await history.push(\"/profile\");\r\n\r\n      //console.log(res);\r\n    } catch (error) {\r\n      dispatch({ type: POST_ERROR, payload: error.response.data });\r\n    }\r\n  };\r\n\r\nexport const editpost =\r\n  (id, { buildname, description, photos, partslist, backgroundimage }) =>\r\n  async (dispatch) => {\r\n    const config = {\r\n      headers: {\r\n        Authorization: localStorage.getItem(\"token\"),\r\n      },\r\n    };\r\n    const formdata = new FormData();\r\n    formdata.append(\"buildname\", buildname);\r\n    formdata.append(\"backgroundimage\", backgroundimage);\r\n    formdata.append(\"description\", description);\r\n    for (var key of Object.keys(photos)) {\r\n      formdata.append(\"photos\", photos[key]);\r\n    }\r\n    formdata.append(\"photos\", photos);\r\n\r\n    formdata.append(\"partslist\", partslist);\r\n    try {\r\n      const res = await axios.post(`/api/posts/EditPost/${id}`, formdata, config);\r\n      dispatch(listpost());\r\n      await history.push(\"/profile\");\r\n\r\n      //console.log(res);\r\n    } catch (error) {\r\n      dispatch({ type: POST_ERROR, payload: error.response.data });\r\n    }\r\n  };\r\n\r\nexport const listpost = () => async (dispatch) => {\r\n  try {\r\n    const res = await axios.get(\"/api/posts/ListPost\");\r\n    dispatch({ type: LIST_POST, payload: res.data.Posts });\r\n    //console.log(res.data.Posts);\r\n  } catch (error) {\r\n    console.log(error);\r\n  }\r\n};\r\nexport const currentPost = () => async (dispatch) => {\r\n  const config = {\r\n    headers: {\r\n      Authorization: localStorage.getItem(\"token\"),\r\n    },\r\n  };\r\n  try {\r\n    const res = await axios.get(\"/api/posts/ListUserPost\", config);\r\n    dispatch({ type: CURRENT_POST, payload: res.data.ListUserPost });\r\n    console.log(res.data.ListUserPost);\r\n  } catch (error) {\r\n    console.log(error);\r\n  }\r\n};\r\nexport const onePost = (id, history) => async (dispatch) => {\r\n  const config = {\r\n    headers: {\r\n      Authorization: localStorage.getItem(\"token\"),\r\n    },\r\n  };\r\n  try {\r\n    const res = await axios.get(`/api/posts/OnePost/${id}`, config);\r\n\r\n    dispatch({ type: ONEPOST, payload: res.data });\r\n    history.push(\"/buildPost\");\r\n  } catch (error) {\r\n    console.log(error);\r\n  }\r\n};\r\nexport const deletedPost = (id) => async (dispatch) => {\r\n  const config = {\r\n    headers: {\r\n      Authorization: localStorage.getItem(\"token\"),\r\n    },\r\n  };\r\n  try {\r\n    const res = await axios.delete(`/api/posts/DeletedPost/${id}`, config);\r\n    dispatch(listpost());\r\n  } catch (error) {\r\n    console.log(error);\r\n  }\r\n};\r\n\r\nexport const deleteBuild = (id, history) => async (dispatch) => {\r\n  const config = {\r\n    headers: {\r\n      Authorization: localStorage.getItem(\"token\"),\r\n    },\r\n  };\r\n  try {\r\n    const res = await axios.delete(`/api/posts/DeletedPost/${id}`, config);\r\n    await history.push(\"/\");\r\n    dispatch(currentPost());\r\n  } catch (error) {\r\n    console.log(error);\r\n  }\r\n};\r\n"]},"metadata":{},"sourceType":"module"}